---
title: è®°ç™¾åº¦å‰ç«¯ä¸€é¢
date: 2019-08-06 14:22:00
categories: æŠ€æœ¯è´´ | é¢è¯•é¢˜
tags: Javascript
thumbnail: https://pub.wangxuefeng.com.cn/asset/blogthumbnail/baiduInterview/thumbnail.png
---

2019å¹´7æœˆ31æ—¥ï¼Œè¿™å¤©çƒˆæ—¥å½“ç©ºï¼Œéª„é˜³ä¼¼ç«ï¼Œæˆ‘å­¤èº«å‰å¾€åŒ—äº¬ç™¾åº¦ç§‘æŠ€å›­ï¼Œå‚åŠ ç™¾åº¦å‰ç«¯ç¤¾æ‹›é¢è¯•ã€‚

è°œä¹‹è‡ªä¿¡çš„æˆ‘ï¼Œä»ä¸åšé¢è¯•å‰çš„å‡†å¤‡ï¼Œåˆ·é¢è¯•é¢˜å¯¹æˆ‘æ¥è¯´æ˜¯ä¸å¯èƒ½çš„ï¼Œé¡¶å¤šä¹Ÿå°±çŸä¸¤çœ¼ï¼Œä¸ä¼šèŠ±å¾ˆå¤šæ—¶é—´åœ¨è¿™ä¸ªä¸Šé¢ï¼Œæ›´æ„¿æ„æŠŠæ—¶é—´éƒ½ç”¨æ¥çœŸæ­£å®è·µä¸­é¡¹ç›®ä¸­ã€‚ç„¶é¹…æˆ‘è¿˜æ˜¯`Too young Too naive`ğŸ¤¦â€ï¼

åˆ°äº†åŒ—äº¬ç™¾åº¦ç§‘æŠ€å›­ï¼Œè¿›å…¥K2å¤§å…ï¼Œé¦–å…ˆæ˜ å…¥çœ¼å¸˜çš„æ˜¯å¤§å…ä¸­å¤®çš„AIæœºå™¨äººï¼Œç„¶åå°±æ˜¯ç™¾åº¦çš„Logoï¼Œç¯è§†ä¸€å‘¨ï¼Œæ„Ÿè§‰ä¸æ„§æ˜¯ç™¾åº¦åœ¨åŒ—äº¬çš„æ€»éƒ¨ï¼ŒK2çš„å¤§å…è¦æ¯”ç½‘æ˜“åœ¨åŒ—äº¬ç ”å‘ä¸­å¿ƒçš„å¤§å…å¤§ä¸€ç‚¹ã€‚è·ç¦»çº¦å®šå¥½çš„é¢è¯•æ—¶é—´è¿˜æœ‰ä¸€ç‚¹æ—¶é—´ï¼Œæˆ‘è¢«å®‰æ’åœ¨å³è¾¹çš„æ²™å‘ä¸Šç­‰å¾…é¢è¯•å®˜ã€‚å°±åœ¨æ­¤æ—¶ï¼Œæˆ‘æ‹¿èµ·æˆ‘çš„è£è€€æ‰‹æœºï¼Œéšæ‰‹æ‹äº†ä¸€å¼ å¤§å…çš„ç…§ç‰‡ã€‚å¦‚ä¸‹

<div style="width:100%;display:flex;flex-direction:column;justify-content:center;text-align:center;">

  <img src="https://pub.wangxuefeng.com.cn/asset/blogthumbnail/baiduInterview/hall.jpg" style="width:100%;max-width:600px;margin: 5px auto;">

</div>

åˆ°äº†çº¦å®šçš„æ—¶é—´ï¼Œé¢è¯•å®˜å¸¦æˆ‘é€šè¿‡é—¨ç¦ï¼Œè¿›å…¥`åå ‚`ï¼Œå‰å¾€é¢è¯•çš„å°æ¡Œè¾¹ã€‚æ‰«è§†ä¸€å‘¨ï¼Œå‘ç°å‘¨å›´å…¨éƒ½æ˜¯é¢è¯•æˆ–è€…è®¨è®ºé—®é¢˜çš„äººï¼Œæˆ‘ï¼Œåªæ˜¯è¿™èŠ¸èŠ¸ä¼—ç”Ÿä¸­çš„ä¸€å‘˜ã€‚

æ¥ä¸‹æ¥å¼€å§‹æ­£å¼é¢è¯•äº†ï¼Œé¢è¯•å®˜æ‰‹æ‹¿Macï¼Œä¸Šé¢æœ‰æˆ‘çš„ç”µå­ç®€å†ï¼Œå¼€å§‹è¯¢é—®é—®é¢˜ï¼Œæˆ‘ä¹Ÿå¼€å§‹å›ç­”é—®é¢˜ã€‚

è¿˜æ˜¯é‚£å¥è¯ï¼Œæˆ‘çœŸçš„æ˜¯`Too young Too naive`ï¼Œé¢è¯•å®˜é—®çš„é—®é¢˜éƒ½æ˜¯èƒ½ç™¾åº¦åˆ°çš„é¢è¯•é¢˜ï¼Œè€Œæˆ‘å°±æ˜¯æ²¡æœ‰å»åˆ·ã€‚è™½ç„¶ä¸€äº›é—®é¢˜å¤§æ¦‚æ˜¯çŸ¥é“çš„ï¼Œä½†æ˜¯åŸç†æ€§çš„ä¸œè¥¿ä¸œå¾ˆæ¨¡ç³Šï¼Œå›ç­”èµ·æ¥éƒ½å¾ˆç¬¼ç»Ÿï¼Œå¯è¶Šæ˜¯ç¬¼ç»Ÿçš„å›ç­”ï¼Œé¢è¯•å®˜å°±è¶Šæ˜¯è¦è¯¦ç»†çš„å»é—®ï¼Œè¿™ä¸ªæ—¶å€™ï¼Œå°±åªèƒ½ä¹–ä¹–çš„å›ç­”*I don't Know*äº†ï¼Œå€˜è‹¥ç¨åŠ è¦è’™æ··è¿‡å…³ï¼Œé‚£ä¹ˆå°±æ˜¯è¯šä¿¡é—®é¢˜äº†ã€‚ç»è¿‡è¿™æ ·`å®é™è€Œåˆç¥¥å’Œçš„`é¢è¯•åï¼Œé¢è¯•ç»“æœä¹Ÿå°±å¿ƒçŸ¥è‚šæ˜äº†ã€‚å½’æ ¹åˆ°åº•ï¼Œè¿˜æ˜¯è‡ªå·±åŸºç¡€ä¸æ‰å®ï¼Œæ²¡æœ‰è¿½æ ¹æº¯æºï¼Œææ˜ç™½åŸç†ã€‚æ‰€ä»¥å­¦ä¹ ä¸€å®šè¦æœ‰æ¢ç´¢ç²¾ç¥ï¼Œè¦æ¢ç©¶æœ¬æºï¼Œå¼„æ¸…åŸç†ï¼Œä¸èƒ½ç³Šå¼„è‡ªå·±ï¼Œè¦å¯¹çš„èµ·è‡ªå·±ä»˜å‡ºçš„æ—¶é—´ã€‚

å¥½äº†ï¼ŒåºŸè¯ä¸å¤šè¯´ï¼Œç›´æ¥ä¸Šé¢˜å§ï¼š

- 1.ä½ åœ¨ä¸Šä¸€å®¶å…¬å¸å®ä¹ ç”¨çš„ä»€ä¹ˆå‰ç«¯æ¡†æ¶ï¼Ÿ

  > Angular

- 2.ä½ è®¤ä¸º Angular å’Œ Vue å„è‡ªçš„ä¼˜ç¼ºç‚¹åœ¨ä»€ä¹ˆåœ°æ–¹ï¼Ÿ

  > Angularï¼Œå‡ºç”Ÿæ¯” Vue æ—©ï¼Œç›¸å¯¹ Vue è¦æ›´åŠ "è€ç»ƒ", é€‚åˆåšå¤§å‹ Web é¡¹ç›®ã€‚Angular é‡‡ç”¨â€œè„å€¼æ£€æµ‹â€çš„æ–¹å¼ï¼Œæ•°æ®å‘ç”Ÿå˜æ›´åï¼Œå¯¹äºæ‰€æœ‰çš„æ•°æ®å’Œè§†å›¾çš„ç»‘å®šå…³ç³»è¿›è¡Œä¸€æ¬¡æ£€æµ‹ï¼Œè¯†åˆ«æ˜¯å¦æœ‰æ•°æ®å‘ç”Ÿäº†æ”¹å˜ï¼Œæœ‰å˜åŒ–è¿›è¡Œå¤„ç†ï¼Œå¯èƒ½è¿›ä¸€æ­¥å¼•å‘å…¶ä»–æ•°æ®çš„æ”¹å˜ï¼Œæ‰€ä»¥è¿™ä¸ªè¿‡ç¨‹å¯èƒ½ä¼šå¾ªç¯å‡ æ¬¡ï¼Œä¸€ç›´åˆ°ä¸å†æœ‰æ•°æ®å˜åŒ–å‘ç”Ÿåï¼Œå°†å˜æ›´çš„æ•°æ®å‘é€åˆ°è§†å›¾ï¼Œæ›´æ–°é¡µé¢å±•ç°ã€‚

  > Vueï¼Œå®šä½ç”¨äºä¸­å°å‹å‰ç«¯é¡¹ç›®ï¼Œç›¸å¯¹äº Angular æ›´åŠ å¹´è½»ã€‚Vue ä½¿ç”¨ Object.defineProperty() æ–¹æ³•ï¼Œç›‘æ§å¯¹æ•°æ®çš„æ“ä½œï¼Œä»è€Œå¯ä»¥è‡ªåŠ¨è§¦å‘æ•°æ®åŒæ­¥ã€‚å¹¶ä¸”ï¼Œç”±äºæ˜¯åœ¨ä¸åŒçš„æ•°æ®ä¸Šè§¦å‘åŒæ­¥ï¼Œå¯ä»¥ç²¾ç¡®çš„å°†å˜æ›´å‘é€ç»™ç»‘å®šçš„è§†å›¾ï¼Œè€Œä¸æ˜¯å¯¹æ‰€æœ‰çš„æ•°æ®éƒ½æ‰§è¡Œä¸€æ¬¡æ£€æµ‹ã€‚

- 3.é‚£ä½ è¯´è¯´ Angular çš„ â€œè„å€¼æ£€æµ‹â€ å§ï¼Œä¼šä¸ä¼šæœ‰æ€§èƒ½é—®é¢˜ï¼Ÿ

  > Angular å›¢é˜Ÿé€šè¿‡å¯¹ [zone.js](https://github.com/angular/angular/tree/master/packages/zone.js) å°è£…ï¼Œå®ç°äº† è„æ£€æŸ¥æœºåˆ¶ï¼ˆChange Detection æˆ– Dirty Checkingï¼‰ã€‚
  > Angular é»˜è®¤æ˜¯è„æ£€æŸ¥æ–¹æ³•æ˜¯ä»æ ¹ç»„ä»¶å¼€å§‹ï¼Œéå†æ‰€æœ‰çš„å­ç»„ä»¶è¿›è¡Œè„æ£€æŸ¥ã€‚
  >
  > è§¦å‘æ¡ä»¶
  >   - Ajax è¯·æ±‚ï¼Œ 
  >   - Timeout å»¶è¿Ÿäº‹ä»¶ï¼Œ
  >   - é¼ æ ‡äº‹ä»¶
  >
  > è§¦å‘è„æ£€æµ‹çš„ç›®çš„å°±æ˜¯æ£€æµ‹è§†å›¾(DOM)æœ‰æ²¡æœ‰å‘ç”Ÿå˜åŒ–ï¼Œæ–¹æ³•å°±æ˜¯æ¯”è¾ƒ åŒå‘ç»‘å®šä¸­ view å’Œ model æ˜¯å¦ä¸€è‡´ã€‚
  >
  > è„æ£€æµ‹çš„æ•ˆç‡å¿…ç„¶ä¸ä¼šå¤ªé«˜ï¼Œä½†ä¹Ÿä¸ä¼šå¾ˆæ…¢ã€‚æ€§èƒ½ä¼˜åŒ–çš„è¯ï¼Œå¯ä»¥ä»
  >  + å‡å°‘é€»è¾‘ä»£ç çš„å¤æ‚ç¨‹åº¦
  >  + å‡å°‘ Event Handlerï¼ˆå¯åšèŠ‚æµå’Œé˜²æŠ–ï¼‰
  >  + é™ä½ DOM æ ‘å¤æ‚åº¦
  > ç­‰å‡ æ–¹é¢è¿›è¡Œã€‚
  >
  > å…·ä½“å¯å‚è€ƒæ–‡ç« 
  > - [å¦‚ä½•ç†è§£angularçš„è„æ£€æŸ¥](https://www.jianshu.com/p/850f0f76e908)
  > - [Angularæ€§èƒ½ä¼˜åŒ–ä¹‹è„æ£€æµ‹](https://blog.csdn.net/wf19930209/article/details/83515873)

- 4.ä¸ºä»€ä¹ˆè¯´ Vue å®šä½äºä¸­å°å‹å‰ç«¯é¡¹ç›®ï¼Œæœ‰ä»€ä¹ˆä¾‹å­èƒ½è¯æ˜ Vue ä¸èƒ½åšæˆ–è€…åšä¸å¥½å¤§å‹é¡¹ç›®å—ï¼Ÿ

  > Vue.js å®˜ç½‘è¿™æ ·ä»‹ç»è‡ªå·±ï¼š
  > Vue (è¯»éŸ³ /vjuË/ï¼Œç±»ä¼¼äº view) æ˜¯ä¸€å¥—ç”¨äºæ„å»ºç”¨æˆ·ç•Œé¢çš„æ¸è¿›å¼æ¡†æ¶ã€‚**ä¸å…¶å®ƒå¤§å‹æ¡†æ¶ä¸åŒçš„æ˜¯ï¼ŒVue è¢«è®¾è®¡ä¸ºå¯ä»¥è‡ªåº•å‘ä¸Šé€å±‚åº”ç”¨**ã€‚
  >
  > å…·ä½“æœ‰ä»€ä¹ˆä¾‹å­èƒ½è¯æ˜ Vue ä¸èƒ½åšæˆ–è€…åšä¸å¥½å¤§å‹é¡¹ç›®æš‚æ—¶è¿˜ä¸å¤ªæ¸…æ¥šï¼Œä½†æ˜¯èƒ½ç¡®å®šçš„æ˜¯ Vue ç”Ÿè€Œä¸ºâ€œç®€â€ã€‚ä¸ React çš„ç®€å•å¯¹æ¯”å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

  <div style="width:100%;display:flex;flex-direction:column;justify-content:center;text-align:center;">

    <img src="https://pub.wangxuefeng.com.cn/asset/blogthumbnail/baiduInterview/vue&react1.png" style="width:100%;max-width:500px;margin: 5px auto;">

    <img src="https://pub.wangxuefeng.com.cn/asset/blogthumbnail/baiduInterview/vue&react2.png" style="width:100%;max-width:500px;margin: 5px auto;">

    <p>ï¼ˆå›¾ç‰‡æ¥è‡ª<a href="https://www.jianshu.com/p/b7cd52868e95" target="_blank">vueå’Œreactçš„åŒºåˆ«ä¹‹æˆ‘è§</a>ï¼‰</p>

  </div>

  > å…·ä½“å¯å‚è€ƒ
  > - [React.jsä¸Vue.jsï¼šæµè¡Œæ¡†æ¶çš„æ¯”è¾ƒ](https://baijiahao.baidu.com/s?id=1608099200125495014&wfr=spider&for=pc)
  > - [vueå’Œreactçš„åŒºåˆ«ä¹‹æˆ‘è§](https://www.jianshu.com/p/b7cd52868e95)

- 5.è¯´è¯´ Vue çš„åŒå‘ç»‘å®šåŸç†å§ã€‚

  > Vue.js å®˜ç½‘è§£é‡Šå¦‚ä¸‹ï¼š
  >
  > å½“ä½ æŠŠä¸€ä¸ªæ™®é€šçš„ JavaScript å¯¹è±¡ä¼ å…¥ Vue å®ä¾‹ä½œä¸º data é€‰é¡¹ï¼ŒVue å°†éå†æ­¤å¯¹è±¡æ‰€æœ‰çš„å±æ€§ï¼Œå¹¶ä½¿ç”¨ Object.defineProperty æŠŠè¿™äº›å±æ€§å…¨éƒ¨è½¬ä¸º getter/setterã€‚Object.defineProperty æ˜¯ ES5 ä¸­ä¸€ä¸ªæ— æ³• shim çš„ç‰¹æ€§ï¼Œè¿™ä¹Ÿå°±æ˜¯ Vue ä¸æ”¯æŒ IE8 ä»¥åŠæ›´ä½ç‰ˆæœ¬æµè§ˆå™¨çš„åŸå› ã€‚
  >
  > è¿™äº› getter/setter å¯¹ç”¨æˆ·æ¥è¯´æ˜¯ä¸å¯è§çš„ï¼Œä½†æ˜¯åœ¨å†…éƒ¨å®ƒä»¬è®© Vue èƒ½å¤Ÿè¿½è¸ªä¾èµ–ï¼Œåœ¨å±æ€§è¢«è®¿é—®å’Œä¿®æ”¹æ—¶é€šçŸ¥å˜æ›´ã€‚è¿™é‡Œéœ€è¦æ³¨æ„çš„æ˜¯ä¸åŒæµè§ˆå™¨åœ¨æ§åˆ¶å°æ‰“å°æ•°æ®å¯¹è±¡æ—¶å¯¹ getter/setter çš„æ ¼å¼åŒ–å¹¶ä¸åŒï¼Œæ‰€ä»¥å»ºè®®å®‰è£… vue-devtools æ¥è·å–å¯¹æ£€æŸ¥æ•°æ®æ›´åŠ å‹å¥½çš„ç”¨æˆ·ç•Œé¢ã€‚
  >
  > æ¯ä¸ªç»„ä»¶å®ä¾‹éƒ½å¯¹åº”ä¸€ä¸ª watcher å®ä¾‹ï¼Œå®ƒä¼šåœ¨ç»„ä»¶æ¸²æŸ“çš„è¿‡ç¨‹ä¸­æŠŠâ€œæ¥è§¦â€è¿‡çš„æ•°æ®å±æ€§è®°å½•ä¸ºä¾èµ–ã€‚ä¹‹åå½“ä¾èµ–é¡¹çš„ setter è§¦å‘æ—¶ï¼Œä¼šé€šçŸ¥ watcherï¼Œä»è€Œä½¿å®ƒå…³è”çš„ç»„ä»¶é‡æ–°æ¸²æŸ“ã€‚

  <div style="width:100%;display:flex;flex-direction:column;justify-content:center;text-align:center;">

    <img src="https://pub.wangxuefeng.com.cn/asset/blogthumbnail/baiduInterview/vue.png" style="width:100%;max-width:500px;margin: 5px auto;">
    
    <p>ï¼ˆå›¾ç‰‡æ¥è‡ª<a href="https://cn.vuejs.org/v2/guide/reactivity.html" target="_blank">Vue.js å®˜ç½‘ æ·±å…¥å“åº”å¼åŸç†</a>ï¼‰</p>

  </div>


  > è‡ªå·±çš„ç†è§£ï¼šVue é€šè¿‡ Object.defineProperty() å°†ä¼ å…¥å‚æ•°çš„ data çš„å±æ€§å…¨éƒ¨è½¬ä¸º getter/setterã€‚åœ¨getter/setter çš„å†…éƒ¨å®ç°å¯¹æ•°æ®ç›‘æ§å’Œæ‹¦æˆªï¼Œå¹¶ç»“åˆå‘å¸ƒè€…-è®¢é˜…è€…æ¨¡å¼ï¼Œåœ¨æ•°æ®å˜åŠ¨æ—¶å‘å¸ƒæ¶ˆæ¯ç»™è®¢é˜…è€…ï¼Œè§¦å‘ç›¸åº”çš„ç›‘å¬å›è°ƒï¼Œå¹¶æ›´æ–°è§†å›¾ã€‚


- 6.èƒ½è¯´è¯´Object.defineProperty()è¿™ä¸ªæ–¹æ³•å—ï¼Œè¿˜æœ‰åœ¨ Vue çš„åŒå‘ç»‘å®šåŸç†ä¸­ getter/setter é‡Œé¢å…·ä½“åšäº†ä»€ä¹ˆï¼Ÿ 

  > Object.defineProperty(obj, prop, descriptor)
  >
  > æ¥æ”¶ä¸‰ä¸ªå‚æ•°ï¼Œåˆ†åˆ«æ˜¯
  > - obj è¦åœ¨å…¶ä¸Šå®šä¹‰å±æ€§çš„å¯¹è±¡
  > - prop è¦å®šä¹‰æˆ–ä¿®æ”¹çš„å±æ€§çš„åç§°
  > - descriptor å°†è¢«å®šä¹‰æˆ–ä¿®æ”¹çš„å±æ€§æè¿°ç¬¦
  > 
  > è¿”å› è¢«ä¼ é€’ç»™å‡½æ•°çš„å¯¹è±¡
  >
  > å…³äº `descriptor`, ç§°ä¸ºå±æ€§æè¿°ç¬¦ï¼Œå¯¹è±¡é‡Œç›®å‰å­˜åœ¨çš„å±æ€§æè¿°ç¬¦æœ‰ä¸¤ç§ä¸»è¦å½¢å¼ï¼š**æ•°æ®æè¿°ç¬¦**å’Œ**å­˜å–æè¿°ç¬¦**ã€‚<br>
  > **æ•°æ®æè¿°ç¬¦**æ˜¯ä¸€ä¸ªå…·æœ‰å€¼çš„å±æ€§ï¼Œè¯¥å€¼å¯èƒ½æ˜¯å¯å†™çš„ï¼Œä¹Ÿå¯èƒ½ä¸æ˜¯å¯å†™çš„ã€‚<br>
  > **å­˜å–æè¿°ç¬¦**æ˜¯ç”± getter-setter å‡½æ•°å¯¹æè¿°çš„å±æ€§ã€‚<br>
  > **æè¿°ç¬¦å¿…é¡»æ˜¯è¿™ä¸¤ç§å½¢å¼ä¹‹ä¸€ï¼›ä¸èƒ½åŒæ—¶æ˜¯ä¸¤è€…**ã€‚
  >
  > æ•°æ®æè¿°ç¬¦å’Œå­˜å–æè¿°ç¬¦å‡å…·æœ‰ä»¥ä¸‹å¯é€‰é”®å€¼
  >
  >(é»˜è®¤å€¼æ˜¯åœ¨ä½¿ç”¨Object.defineProperty()å®šä¹‰å±æ€§çš„æƒ…å†µä¸‹)ï¼š
  >
  > - configurable å½“ä¸”ä»…å½“è¯¥å±æ€§çš„ configurable ä¸º true æ—¶ï¼Œè¯¥å±æ€§æè¿°ç¬¦æ‰èƒ½å¤Ÿè¢«æ”¹å˜ï¼ŒåŒæ—¶è¯¥å±æ€§ä¹Ÿèƒ½ä»å¯¹åº”çš„å¯¹è±¡ä¸Šè¢«åˆ é™¤ã€‚`é»˜è®¤ä¸º false`ã€‚
  > - enumerable å½“ä¸”ä»…å½“è¯¥å±æ€§çš„enumerableä¸ºtrueæ—¶ï¼Œè¯¥å±æ€§æ‰èƒ½å¤Ÿå‡ºç°åœ¨å¯¹è±¡çš„æšä¸¾å±æ€§ä¸­ã€‚`é»˜è®¤ä¸º false`ã€‚
  >
  > æ•°æ®æè¿°ç¬¦åŒæ—¶å…·æœ‰ä»¥ä¸‹å¯é€‰é”®å€¼ï¼š
  > - value è¯¥å±æ€§å¯¹åº”çš„å€¼ã€‚å¯ä»¥æ˜¯ä»»ä½•æœ‰æ•ˆçš„ JavaScript å€¼ï¼ˆæ•°å€¼ï¼Œå¯¹è±¡ï¼Œå‡½æ•°ç­‰ï¼‰ã€‚`é»˜è®¤ä¸º undefined`ã€‚
  > - writable å½“ä¸”ä»…å½“è¯¥å±æ€§çš„writableä¸ºtrueæ—¶ï¼Œvalueæ‰èƒ½è¢«èµ‹å€¼è¿ç®—ç¬¦æ”¹å˜ã€‚`é»˜è®¤ä¸º false`ã€‚  
  > 
  > å­˜å–æè¿°ç¬¦åŒæ—¶å…·æœ‰ä»¥ä¸‹å¯é€‰é”®å€¼ï¼š
  >
  > - get ä¸€ä¸ªç»™å±æ€§æä¾› getter çš„æ–¹æ³•ï¼Œå¦‚æœæ²¡æœ‰ getter åˆ™ä¸º undefinedã€‚å½“è®¿é—®è¯¥å±æ€§æ—¶ï¼Œè¯¥æ–¹æ³•ä¼šè¢«æ‰§è¡Œï¼Œæ–¹æ³•æ‰§è¡Œæ—¶æ²¡æœ‰å‚æ•°ä¼ å…¥ï¼Œä½†æ˜¯ä¼šä¼ å…¥thiså¯¹è±¡ï¼ˆç”±äºç»§æ‰¿å…³ç³»ï¼Œè¿™é‡Œçš„thiså¹¶ä¸ä¸€å®šæ˜¯å®šä¹‰è¯¥å±æ€§çš„å¯¹è±¡ï¼‰ã€‚`é»˜è®¤ä¸º undefined`ã€‚
  > - set ä¸€ä¸ªç»™å±æ€§æä¾› setter çš„æ–¹æ³•ï¼Œå¦‚æœæ²¡æœ‰ setter åˆ™ä¸º undefinedã€‚å½“å±æ€§å€¼ä¿®æ”¹æ—¶ï¼Œè§¦å‘æ‰§è¡Œè¯¥æ–¹æ³•ã€‚è¯¥æ–¹æ³•å°†æ¥å—å”¯ä¸€å‚æ•°ï¼Œå³è¯¥å±æ€§æ–°çš„å‚æ•°å€¼ã€‚`é»˜è®¤ä¸º undefined`ã€‚
  >
  > **å¦‚æœä¸€ä¸ªæè¿°ç¬¦ä¸å…·æœ‰value,writable,get å’Œ set ä»»æ„ä¸€ä¸ªå…³é”®å­—ï¼Œé‚£ä¹ˆå®ƒå°†è¢«è®¤ä¸ºæ˜¯ä¸€ä¸ªæ•°æ®æè¿°ç¬¦ã€‚å¦‚æœä¸€ä¸ªæè¿°ç¬¦åŒæ—¶æœ‰(valueæˆ–writable)å’Œ(getæˆ–set)å…³é”®å­—ï¼Œå°†ä¼šäº§ç”Ÿä¸€ä¸ªå¼‚å¸¸**ã€‚
  >
  > å¦‚æœåŒæ—¶è¦å®šä¹‰æˆ–ä¿®æ”¹å¤šä¸ªå±æ€§ï¼Œå¯ä»¥ä½¿ç”¨ `Object.defineProperties(obj, props)` 
  > å¦‚ï¼š
  >
  ```js
      var obj = {};
      Object.defineProperties(obj, {
        'property1': {
          value: true,
          writable: true
        },
        'property2': {
          value: 'Hello',
          writable: false
        }
        // etc. etc.
      });
  ```
  >
  > Vue çš„åŒå‘ç»‘å®šåŸç†ä¸­ getter/setter é‡Œé¢å…·ä½“åšäº†ä»€ä¹ˆï¼Œçœ‹çœ‹æºç ï¼š
  >
  > æºç æ¥è‡ªï¼šhttps://github.com/vuejs/vue/blob/dev/src/core/observer/index.js

  ```js

    // ...
    /**
    * Define a reactive property on an Object.
    */
    export function defineReactive (
      obj: Object,
      key: string,
      val: any,
      customSetter?: ?Function,
      shallow?: boolean
    ) {
      const dep = new Dep()

      const property = Object.getOwnPropertyDescriptor(obj, key)
      if (property && property.configurable === false) {
        return
      }

      // cater for pre-defined getter/setters
      const getter = property && property.get
      const setter = property && property.set
      if ((!getter || setter) && arguments.length === 2) {
        val = obj[key]
      }

      let childOb = !shallow && observe(val)
      Object.defineProperty(obj, key, {
        enumerable: true,
        configurable: true,
        get: function reactiveGetter () {
          const value = getter ? getter.call(obj) : val
          if (Dep.target) {
            dep.depend()
            if (childOb) {
              childOb.dep.depend()
              if (Array.isArray(value)) {
                dependArray(value)
              }
            }
          }
          return value
        },
        set: function reactiveSetter (newVal) {
          const value = getter ? getter.call(obj) : val
          /* eslint-disable no-self-compare */
          if (newVal === value || (newVal !== newVal && value !== value)) {
            return
          }
          /* eslint-enable no-self-compare */
          if (process.env.NODE_ENV !== 'production' && customSetter) {
            customSetter()
          }
          // #7981: for accessor properties without setter
          if (getter && !setter) return
          if (setter) {
            setter.call(obj, newVal)
          } else {
            val = newVal
          }
          childOb = !shallow && observe(newVal)
          dep.notify()
        }
      })
    }

    /**
    * Collect dependencies on array elements when the array is touched, since
    * we cannot intercept array element access like property getters.
    */
    function dependArray (value: Array<any>) {
      for (let e, i = 0, l = value.length; i < l; i++) {
        e = value[i]
        e && e.__ob__ && e.__ob__.dep.depend()
        if (Array.isArray(e)) {
          dependArray(e)
        }
      }
    }
    // ...

  ```
  > å…¶ä¸­ get 
  >
  ```js
    get: function reactiveGetter () {
      const value = getter ? getter.call(obj) : val
      // åˆ¤æ–­ property æ˜¯å¦å·²ç»å…·æœ‰ getter
      // å¦‚æœå·²ç»å…·æœ‰ getterï¼Œåˆ™è°ƒç”¨è¯¥ getter
      // å¦åˆ™ value ä¸ºè¯¥å±æ€§å€¼
      if (Dep.target) {
      // Dep ä¸ºä¸€ä¸ªè®¢é˜…å™¨ï¼Œåˆ¤æ–­æ˜¯å¦éœ€è¦æ·»åŠ è®¢é˜…è€…ï¼Œä¹Ÿå¯ä»¥å«åšæ”¶é›†ä¾èµ–
        dep.depend()
        // æ·»åŠ è®¢é˜…è€… æ”¶é›†ä¾èµ–
        if (childOb) {
          // å¦‚æœéœ€è¦æ·»åŠ å­è®¢é˜…è€…
          childOb.dep.depend()
          // childOb.dep ä¸ºä¸€ä¸ªå­è®¢é˜…å™¨ï¼Œåœ¨å­è®¢é˜…å™¨æ·»åŠ è®¢é˜…è€…
          if (Array.isArray(value)) {
            // å¦‚æœ value æ˜¯æ•°ç»„çš„è¯
            dependArray(value)
            // ï¼ˆé€’å½’ï¼‰æ·»åŠ æ•°ç»„è®¢é˜…è€…ï¼Œç›‘å¬æ•°ç»„çš„å˜åŒ–
          }
        }
      }
      return value
      // è¿”å› value
    },
   ```
  > set

  ```js
  set: function reactiveSetter (newVal) {
    const value = getter ? getter.call(obj) : val
    // è·å–ä¿®æ”¹å‰çš„ value
    
    /* eslint-disable no-self-compare */
    if (newVal === value || (newVal !== newVal && value !== value)) {
    // å¦‚æœ æ–°çš„å€¼ä¸ä¿®æ”¹å‰ç›¸åŒ ç›´æ¥è¿”å›
      return
    }
    /* eslint-enable no-self-compare */
    if (process.env.NODE_ENV !== 'production' && customSetter) {
    // å¦‚æœåœ¨ç”Ÿäº§ç¯å¢ƒä¸‹å¹¶ä¸”å…·æœ‰ customSetterï¼Œ åˆ™è°ƒç”¨ customSetter
      customSetter()
    }
    // #7981: for accessor properties without setter
    if (getter && !setter) return
    // å¦‚æœæ²¡æœ‰ setter è®¿é—®è€…å±æ€§çš„è¯ç›´æ¥è¿”å›
    
    if (setter) {
    // å¦‚æœ property å·²ç»æœ‰ setterï¼Œè°ƒç”¨ setter
      setter.call(obj, newVal)
    } else {
    // å¦åˆ™ è¿›è¡Œèµ‹å€¼
      val = newVal
    }
    childOb = !shallow && observe(newVal)
    // ï¼ˆé€’å½’ï¼‰æ›´æ–°å­è®¢é˜…å™¨
    dep.notify()
    // å‘è®¢é˜…è€…å‘å¸ƒæ›´æ–°ï¼Œæ›´æ–°è§†å›¾
  }
  ```
  > æºç ä¼ é€é—¨
  > - [åŒå‘ç»‘å®šå…·ä½“å®ç° æºç ](https://github.com/vuejs/vue/blob/dev/src/core/observer/index.js)
  > - [Watcher çš„å…·ä½“å®ç° æºç ](https://github.com/vuejs/vue/blob/dev/src/core/observer/watcher.js)
  > - [Dep çš„å…·ä½“å®ç° æºç ](https://github.com/vuejs/vue/blob/dev/src/core/observer/dep.js)
  >
  > ç®€å•æ€»ç»“ä¸€ä¸‹å°±æ˜¯ï¼Œåœ¨ getter ä¸­æ·»åŠ è®¢é˜…ï¼Œæ”¶é›†ä¾èµ–ï¼Œ åœ¨ setter ä¸­å‘å¸ƒè®¢é˜…ï¼Œæ›´æ–°ä¾èµ–å’Œè§†å›¾

- 7.è¯´è¯´ Vue ä¸­ watch å’Œ computed çš„åŒºåˆ«ã€‚

  > - [vue å®˜ç½‘çš„è§£é‡Š](https://cn.vuejs.org/v2/guide/computed.html)
  > - ç®€å•æ€»ç»“ä¸€ä¸‹ï¼š
  >   + computed: è®¡ç®—å±æ€§ï¼Œç”¨äºå¤æ‚çš„é€»è¾‘è®¡ç®—ï¼Œå¹¶ä¸”åŸºäºå®ƒä»¬çš„å“åº”å¼ä¾èµ–å°†è®¡ç®—ç»“æœè¿›è¡Œç¼“å­˜ä»¥å‡å°‘æ€§èƒ½å¼€é”€ï¼Œå¦‚æœä¸å¸Œæœ›æœ‰ç¼“å­˜ï¼Œå¯ä»¥ä½¿ç”¨æ–¹æ³•æ¥æ›¿ä»£ã€‚è®¡ç®—å±æ€§é»˜è®¤åªæœ‰ getter ï¼Œä¸è¿‡åœ¨éœ€è¦æ—¶ä¹Ÿå¯ä»¥æä¾›ä¸€ä¸ª setterã€‚è®¡ç®—å±æ€§ä¸å¯åœ¨ data é‡Œé¢å®šä¹‰, ã€‚
  >   + watch: ä¾¦å¬å™¨, ç”¨äºåœ¨æ•°æ®å˜åŒ–æ—¶éœ€è¦æ‰§è¡Œå¼‚æ­¥æˆ–å¼€é”€è¾ƒå¤§çš„æ“ä½œæ—¶ï¼Œæ¯ä¸ª watch å…·æœ‰ oldValue å’Œ newValue å‚æ•°ï¼›å¯ä»¥è®¾ç½®ä¸­é—´çŠ¶æ€ï¼Œè¿™äº›éƒ½æ˜¯è®¡ç®—å±æ€§æ— æ³•åšåˆ°çš„ã€‚
  >
  > - å…·ä½“å®ç° computed:
  >

  ```js
    // src/core/instance/state.js

    // åˆå§‹åŒ–è®¡ç®—å±æ€§
    function initComputed (vm: Component, computed: Object) {
      ...
      // éå† computed è®¡ç®—å±æ€§
      for (const key in computed) {
        ...
        // åˆ›å»º Watcher å®ä¾‹
        // create internal watcher for the computed property.
        watchers[key] = new Watcher(vm, getter || noop, noop, computedWatcherOptions)

        // åˆ›å»ºå±æ€§ å¹¶å°†æä¾›çš„å‡½æ•°å°†ç”¨ä½œå±æ€§çš„ getterï¼Œ
        // æœ€ç»ˆ computed ä¸ data ä¼šä¸€èµ·æ··åˆåˆ° vm ä¸‹ï¼Œæ‰€ä»¥å½“ computed ä¸ data å­˜åœ¨é‡åå±æ€§æ—¶ä¼šæŠ›å‡ºè­¦å‘Š
        defineComputed(vm, key, userDef)
        ...
      }
    }

    export function defineComputed (target: any, key: string, userDef: Object | Function) {
      ...
      // åˆ›å»º get set æ–¹æ³•
      sharedPropertyDefinition.get = createComputedGetter(key)
      sharedPropertyDefinition.set = noop
      ...
      // åˆ›å»ºå±æ€§ï¼Œå¹¶åˆå§‹åŒ– getter setter
      Object.defineProperty(target, key, sharedPropertyDefinition)
    }

    function createComputedGetter (key) {
      return function computedGetter () {
        const watcher = this._computedWatchers && this._computedWatchers[key]
        if (watcher) {
          if (watcher.dirty) {
            // watcher æš´éœ² evaluate æ–¹æ³•ç”¨äºå–å€¼æ“ä½œ
            watcher.evaluate()
          }
          // åˆ¤æ–­æ˜¯å¦å¤„äºä¾èµ–æ”¶é›†çŠ¶æ€
          if (Dep.target) {
            watcher.depend()
          }
          return watcher.value
        }
      }
    }
  ```

  > æ— è®ºæ˜¯å±æ€§è¿˜æ˜¯è®¡ç®—å±æ€§ï¼Œéƒ½ä¼šç”Ÿæˆä¸€ä¸ªå¯¹åº”çš„ watcher å®ä¾‹ã€‚

  ```js
    // src/core/observer/watcher.js

    // å½“è·å–è®¡ç®—å±æ€§æ—¶ï¼Œå°±ä¼šè¿›åˆ°è¿™ä¸ª getter æ–¹æ³•
    get () {
      // this æŒ‡çš„æ˜¯ watcher å®ä¾‹
      // å°†å½“å‰ watcher å®ä¾‹æš‚å­˜åˆ° Dep.targetï¼Œè¿™å°±è¡¨ç¤ºå¼€å¯äº†ä¾èµ–æ”¶é›†ä»»åŠ¡
      pushTarget(this)
      let value
      const vm = this.vm
      try {
        // åœ¨æ‰§è¡Œå®šä¹‰è®¡ç®—å±æ€§çš„å‡½æ•°æ—¶ï¼Œä¼šè§¦å‘å±æ€§å’Œè®¡ç®—å±æ€§çš„ getter
        // åœ¨è¿™ä¸ªæ‰§è¡Œè¿‡ç¨‹ä¸­ï¼Œå°±å¯ä»¥æ”¶é›†åˆ°å®šä¹‰è®¡ç®—å±æ€§çš„ä¾èµ–äº†
        value = this.getter.call(vm, vm)
      } catch (e) {
        if (this.user) {
          handleError(e, vm, `getter for watcher "${this.expression}"`)
        } else {
          throw e
        }
      } finally {
        if (this.deep) {
          traverse(value)
        }
        // ç»“æŸä¾èµ–æ”¶é›†ä»»åŠ¡
        popTarget()
        this.cleanupDeps()
      }
      return value
    }
  ```

  > dep

  ```js
    // src/core/observer/dep.js

    export default class Dep {
      static target: ?Watcher;
      id: number;
      subs: Array<Watcher>;

      constructor () {
        this.id = uid++
        this.subs = []
      }

      addSub (sub: Watcher) {
        this.subs.push(sub)
      }

      removeSub (sub: Watcher) {
        remove(this.subs, sub)
      }

      depend () {
        if (Dep.target) {
          Dep.target.addDep(this)
        }
      }

      notify () {
        const subs = this.subs.slice()
        for (let i = 0, l = subs.length; i < l; i++) {
          // æ›´æ–° watcher çš„å€¼ï¼Œä¸ watcher.evaluate() ç±»ä¼¼ï¼Œ
          // ä½† update æ˜¯ç»™ä¾èµ–å˜åŒ–æ—¶ä½¿ç”¨çš„ï¼ŒåŒ…å«å¯¹ watch çš„å¤„ç†
          subs[i].update()
        }
      }
    }

    // å½“é¦–æ¬¡è®¡ç®— computed å±æ€§çš„å€¼æ—¶ï¼ŒDep å°†ä¼šåœ¨è®¡ç®—æœŸé—´å¯¹ä¾èµ–è¿›è¡Œæ”¶é›†
    Dep.target = null
    const targetStack = []

    export function pushTarget (_target: Watcher) {
      // åœ¨ä¸€æ¬¡ä¾èµ–æ”¶é›†æœŸé—´ï¼Œå¦‚æœæœ‰å…¶ä»–ä¾èµ–æ”¶é›†ä»»åŠ¡å¼€å§‹ï¼ˆæ¯”å¦‚ï¼šå½“å‰ computed è®¡ç®—å±æ€§åµŒå¥—å…¶ä»– computed è®¡ç®—å±æ€§ï¼‰ï¼Œ
      // é‚£ä¹ˆå°†ä¼šæŠŠå½“å‰ target æš‚å­˜åˆ° targetStackï¼Œå…ˆè¿›è¡Œå…¶ä»– target çš„ä¾èµ–æ”¶é›†ï¼Œ
      if (Dep.target) targetStack.push(Dep.target)
      Dep.target = _target
    }

    export function popTarget () {
      // å½“åµŒå¥—çš„ä¾èµ–æ”¶é›†ä»»åŠ¡å®Œæˆåï¼Œå°† target æ¢å¤ä¸ºä¸Šä¸€å±‚çš„ Watcherï¼Œå¹¶ç»§ç»­åšä¾èµ–æ”¶é›†
      Dep.target = targetStack.pop()
    }    
  ```

  > æ€»ç»“ä¸€ä¸‹ä¾èµ–æ”¶é›†ã€åŠ¨æ€è®¡ç®—çš„æµç¨‹ï¼š
  > - data å±æ€§åˆå§‹åŒ– getter setter
  > - computed è®¡ç®—å±æ€§åˆå§‹åŒ–ï¼Œæä¾›çš„å‡½æ•°å°†ç”¨ä½œå±æ€§çš„ getter
  > - å½“é¦–æ¬¡è·å–è®¡ç®—å±æ€§çš„å€¼æ—¶ï¼ŒDep å¼€å§‹ä¾èµ–æ”¶é›†
  > - åœ¨æ‰§è¡Œ getter æ–¹æ³•æ—¶ï¼Œå¦‚æœ Dep å¤„äºä¾èµ–æ”¶é›†çŠ¶æ€ï¼Œåˆ™åˆ¤å®š è¯¥å±æ€§ä¸º è®¡ç®—å±æ€§ çš„ä¾èµ–ï¼Œå¹¶å»ºç«‹ä¾èµ–å…³ç³»
  > - å½“ æ‰€ä¾èµ–çš„å±æ€§ å‘ç”Ÿå˜åŒ–æ—¶ï¼Œæ ¹æ®ä¾èµ–å…³ç³»ï¼Œè§¦å‘ è®¡ç®—å±æ€§çš„å‡½æ•° é‡æ–°è®¡ç®—
  >
  >   å‚è€ƒæ–‡ç« ï¼š[æ·±å…¥ç†è§£ Vue Computed è®¡ç®—å±æ€§](https://segmentfault.com/a/1190000010408657)

  > - å…·ä½“å®ç° watch:

  ```js
    // åˆå§‹åŒ–
    // initState -> initWatch

    function Vue(){
      ... // å…¶ä»–å¤„ç†
      initState(this)
      ... // è§£ææ¨¡æ¿ï¼Œç”ŸæˆDOM æ’å…¥é¡µé¢
    }
    function initState (vm: Component) {
      ... // å¤„ç† dataï¼Œpropsï¼Œcomputed ç­‰æ•°æ®
      if (opts.watch && opts.watch !== nativeWatch) {
        initWatch(vm, opts.watch)
      }
    }
    function initWatch (vm: Component, watch: Object) {
      for (const key in watch) {
        const handler = watch[key]
        if (Array.isArray(handler)) {
          for (let i = 0; i < handler.length; i++) {
            createWatcher(vm, key, handler[i])
          }
        } else {
          createWatcher(vm, key, handler)
        }
      }
    }
    /**
    * Strict object type check. Only returns true
    * for plain JavaScript objects.
    */
    function isPlainObject (obj: any): boolean {
      return _toString.call(obj) === '[object Object]'
    }
    function createWatcher (
      vm: Component,
      expOrFn: string | Function,
      handler: any,
      options?: Object
    ) {
      // expOrFn æ˜¯ keyï¼Œhandler å¯èƒ½æ˜¯å¯¹è±¡

      // ç›‘å¬å±æ€§çš„å€¼æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼ŒåŒ…å«handlerï¼Œdeepï¼Œimmediate
      if (isPlainObject(handler)) {
        options = handler
        handler = handler.handler
      }
      if (typeof handler === 'string') {
        handler = vm[handler]
      }
      return vm.$watch(expOrFn, handler, options)
    }
    Vue.prototype.$watch = function (
        expOrFn: string | Function,
        cb: any,
        options?: Object
      ): Function {
        // expOrFn æ˜¯ ç›‘å¬çš„ keyï¼Œcb æ˜¯ç›‘å¬çš„å›è°ƒï¼Œoptions æ˜¯ ç›‘å¬çš„æ‰€æœ‰é€‰é¡¹
        const vm: Component = this
        if (isPlainObject(cb)) {
          return createWatcher(vm, expOrFn, cb, options)
        }
        options = options || {}
        options.user = true
        const watcher = new Watcher(vm, expOrFn, cb, options)
        if (options.immediate) {
          // è®¾å®šäº†ç«‹å³æ‰§è¡Œï¼Œé©¬ä¸Šæ‰§è¡Œå›è°ƒ
          try {
            cb.call(vm, watcher.value)
          } catch (error) {
            handleError(error, vm, `callback for immediate watcher "${watcher.expression}"`)
          }
        }
        return function unwatchFn () {
          watcher.teardown()
        }
      }
    }
    class Watcher {
      // ...
      constructor (
        vm: Component,
        expOrFn: string | Function,
        cb: Function,
        options?: ?Object,
        isRenderWatcher?: boolean
      ) {
        // ...
        this.vm = vm
        this.deep = opt.deep
        this.cb = cb
        // ...
        // parse expression for getter
        if (typeof expOrFn === 'function') {
          this.getter = expOrFn
        } else {
          this.getter = parsePath(expOrFn)
          // ...
          this.value = this.lazy
            ? undefined
            : this.get()            
          // this.get ä½œç”¨å°±æ˜¯æ‰§è¡Œ this.getter å‡½æ•°
      }
      // ...
      get () {
        // this æŒ‡çš„æ˜¯ watcher å®ä¾‹
        // å°†å½“å‰ watcher å®ä¾‹æš‚å­˜åˆ° Dep.targetï¼Œè¿™å°±è¡¨ç¤ºå¼€å¯äº†ä¾èµ–æ”¶é›†ä»»åŠ¡
        pushTarget(this)
        let value
        const vm = this.vm
        try {
          // è§¦å‘ getter
          value = this.getter.call(vm, vm)
        } catch (e) {
          if (this.user) {
            handleError(e, vm, `getter for watcher "${this.expression}"`)
          } else {
            throw e
          }
        } finally {
          if (this.deep) {
            // å¤„ç†æ·±åº¦ç›‘å¬
            traverse(value)
          }
          // ç»“æŸä¾èµ–æ”¶é›†ä»»åŠ¡
          popTarget()
          this.cleanupDeps()
        }
        return value
      }

      /**
      * Subscriber interface.
      * Will be called when a dependency changes.
      */
      update () {
        /* istanbul ignore else */
        if (this.lazy) {
          this.dirty = true
        } else if (this.sync) {
          this.run()
        } else {
          queueWatcher(this)
        }
      }

      /**
      * Scheduler job interface.
      * Will be called by the scheduler.
      */
      run () {
        if (this.active) {
          const value = this.get()
          if (
            value !== this.value ||
            // Deep watchers and watchers on Object/Arrays should fire even
            // when the value is the same, because the value may
            // have mutated.
            isObject(value) ||
            this.deep
          ) {
            // set new value
            const oldValue = this.value
            this.value = value
            if (this.user) {
              // cb æ˜¯ç›‘å¬å›è°ƒ
              try {
                this.cb.call(this.vm, value, oldValue)
              } catch (e) {
                handleError(e, this.vm, `callback for watcher "${this.expression}"`)
              }
            } else {
              this.cb.call(this.vm, value, oldValue)
            }
          }
        }
      }
      // ...
    };

    const seenObjects = new Set()
    /**
    * Recursively traverse an object to evoke all converted
    * getters, so that every nested property inside the object
    * is collected as a "deep" dependency.
    * é€’å½’éå†ä¸€ä¸ªå¯¹è±¡ä»¥å”¤èµ·æ‰€æœ‰è½¬æ¢çš„ getterï¼Œä½¿å¯¹è±¡å†…çš„æ¯ä¸ªåµŒå¥—å±æ€§è¢«æ”¶é›†ä¸ºâ€œæ·±å±‚â€ä¾èµ–
    */

    export function traverse (val: any) {
      _traverse(val, seenObjects)
      seenObjects.clear()
    }

    function _traverse (val: any, seen: SimpleSet) {
      let i, keys
      const isA = Array.isArray(val)
      if ((!isA && !isObject(val)) || Object.isFrozen(val) || val instanceof VNode) {
        return
      }
      if (val.__ob__) {
        const depId = val.__ob__.dep.id
        if (seen.has(depId)) {
          return
        }
        seen.add(depId)
      }

      // ä¸æ–­é€’å½’æ·±å…¥è¯»å–å¯¹è±¡ï¼Œæ”¶é›†ä¾èµ–
      if (isA) {
        // val[i] å°±æ˜¯è¯»å–å€¼äº†ï¼Œç„¶åå€¼çš„å¯¹è±¡å°±èƒ½æ”¶é›†åˆ° watch-watcher
        i = val.length
        while (i--) _traverse(val[i], seen)
      } else {
        keys = Object.keys(val)
        i = keys.length
        while (i--) _traverse(val[keys[i]], seen)
      }
    }

  ```

  > å¤§æ¦‚æ€»ç»“ä¸€ä¸‹
  > - 1.è·å–ç›‘å¬å›è°ƒ
  >   + å¦‚æœé…ç½®æ˜¯ä¸ªå¯¹è±¡ï¼Œå°±å– handler å­—æ®µ
  >   + å¦‚æœé…ç½®æ˜¯å‡½æ•°ï¼Œé‚£ä¹ˆç›´æ¥å°±æ˜¯ ç›‘å¬å›è°ƒ
  >   + å¦‚æœé…ç½®æ˜¯å­—ç¬¦ä¸²ï¼Œä»å®ä¾‹ä¸Šè·å–å‡½æ•°
  > - 2.è°ƒç”¨ vm.$watch
  >   + åˆ¤æ–­æ˜¯å¦ç«‹å³æ‰§è¡Œç›‘å¬å›è°ƒ
  >   + æ¯ä¸ª watch é…å‘ watcher
  >   + watcher åœ¨ç»“å°¾ä¼šç«‹å³æ‰§è¡Œä¸€æ¬¡ watcher.getï¼Œå…¶ä¸­ä¾¿ä¼šæ‰§è¡Œ getterï¼Œä¾¿ä¼šæ ¹æ®ç›‘å¬çš„ keyï¼Œå»å®ä¾‹ä¸Šè¯»å–å¹¶è¿”å›ï¼Œå­˜æ”¾åœ¨ watcher.value ä¸Š
  >   + é€šè¿‡ traverse å®ç°æ·±åº¦ç›‘å¬
  >   + é€šè¿‡ watcher.update å®ç°æ›´æ–°ï¼Œå¹¶è°ƒç”¨ ç›‘å¬å›è°ƒä¸”ä¼ å…¥æ–°å€¼å’Œæ—§å€¼
  >
  > å‚è€ƒæ–‡ç« ï¼š[ã€VueåŸç†ã€‘Watch - æºç ç‰ˆ](https://segmentfault.com/a/1190000019684439)

- 8.è°ˆè°ˆ XSS å’Œ CSRF çš„åŒºåˆ«ã€‚

  > XSS (Cross Site Scripting)ï¼Œå³è·¨ç«™è„šæœ¬æ”»å‡»ï¼Œæ˜¯ä¸€ç§å¸¸è§äº Web åº”ç”¨ä¸­çš„è®¡ç®—æœºå®‰å…¨æ¼æ´ã€‚
  > æ¶æ„æ”»å‡»è€…å¾€ Web é¡µé¢é‡ŒåµŒå…¥æ¶æ„çš„å®¢æˆ·ç«¯è„šæœ¬ï¼Œå½“ç”¨æˆ·æµè§ˆæ­¤ç½‘é¡µæ—¶ï¼Œè„šæœ¬å°±ä¼šåœ¨ç”¨æˆ·çš„æµè§ˆå™¨ä¸Šæ‰§è¡Œï¼Œè¿›è€Œè¾¾åˆ°æ”»å‡»è€…çš„ç›®çš„ã€‚
  > æ¯”å¦‚è·å–ç”¨æˆ·çš„ Cookieã€å¯¼èˆªåˆ°æ¶æ„ç½‘ç«™ã€æºå¸¦æœ¨é©¬ç­‰ã€‚å€ŸåŠ©å®‰å…¨åœˆé‡Œé¢éå¸¸æœ‰åçš„ä¸€å¥è¯ï¼š
  >
  ```
    æ‰€æœ‰çš„è¾“å…¥éƒ½æ˜¯æœ‰å®³çš„ã€‚
  ```
  >
  > CSRFï¼ˆCross-site request forgeryï¼‰è·¨ç«™è¯·æ±‚ä¼ªé€ ï¼Œä¹Ÿè¢«ç§°ä¸ºâ€œOne Click Attackâ€æˆ–è€…Session Ridingï¼Œé€šå¸¸ç¼©å†™ä¸ºCSRFæˆ–è€…XSRFï¼Œæ˜¯ä¸€ç§å¯¹ç½‘ç«™çš„æ¶æ„åˆ©ç”¨ã€‚å°½ç®¡å¬èµ·æ¥åƒè·¨ç«™è„šæœ¬ï¼ˆXSSï¼‰ï¼Œä½†å®ƒä¸XSSéå¸¸ä¸åŒï¼ŒXSSåˆ©ç”¨ç«™ç‚¹å†…çš„ä¿¡ä»»ç”¨æˆ·ï¼Œè€ŒCSRFåˆ™é€šè¿‡ä¼ªè£…æˆå—ä¿¡ä»»ç”¨æˆ·çš„è¯·æ±‚æ¥åˆ©ç”¨å—ä¿¡ä»»çš„ç½‘ç«™ã€‚ä¸XSSæ”»å‡»ç›¸æ¯”ï¼ŒCSRFæ”»å‡»å¾€å¾€ä¸å¤§æµè¡Œï¼ˆå› æ­¤å¯¹å…¶è¿›è¡Œé˜²èŒƒçš„èµ„æºä¹Ÿç›¸å½“ç¨€å°‘ï¼‰å’Œéš¾ä»¥é˜²èŒƒï¼Œæ‰€ä»¥è¢«è®¤ä¸ºæ¯”XSSæ›´å…·å±é™©æ€§ã€‚

  > è¯¦è§
  > - [ç®€è¿°XSSå’ŒCSRFçš„æ¦‚å¿µå’ŒåŒºåˆ«](https://blog.csdn.net/weixin_39327883/article/details/89512217)
  > - [XSSåŠCSRFæ”»å‡»é˜²å¾¡](https://blog.csdn.net/zl834205311/article/details/81773511)

- 9.è§£å†³è·¨åŸŸçš„æ–¹å¼æœ‰å“ªäº›ï¼Ÿ

  > - 1.jsonp
  > - 2.PostMessage, PostMessage æ˜¯ä¸€ä¸ªç”¨äºå®‰å…¨åœ°ä½¿ç”¨è·¨æºé€šä¿¡çš„æ–¹æ³•ã€‚å®ƒå…è®¸æ¥è‡ªä¸åŒæºçš„è„šæœ¬é‡‡ç”¨å¼‚æ­¥çš„æ–¹å¼è¿›è¡Œæœ‰é™çš„é€šä¿¡ï¼Œå¯ä»¥å®ç°è·¨æ–‡æœ¬æ¡£ã€å¤šçª—å£ã€è·¨åŸŸæ¶ˆæ¯ä¼ é€’ï¼Œç›¸å½“äºæä¾›äº†ä¸€ä¸ªå—æ§çš„æœºåˆ¶æ¥å®‰å…¨åœ°ç»•è¿‡æµè§ˆå™¨çš„åŒæºé™åˆ¶
  > - 3.CORSï¼ŒæœåŠ¡ç«¯è®¾ç½® `header( "Access-Control-Allow-Origin:*" );`
  > - 4.ä»£ç†, å¼€å‘ç¯å¢ƒä¸‹å¯ä»¥é…ç½® webpack çš„ devServer ä¸‹çš„ proxyï¼Œç”Ÿäº§ç¯å¢ƒä¸­å¯ä»¥é€šè¿‡é…ç½®nginxæˆ–apacheç­‰æœåŠ¡ç«¯ç¨‹åºä»£ç†è½¬å‘è¯·æ±‚

- 10.è¯´è¯´å‰ç«¯é¡µé¢çš„æ€§èƒ½ä¼˜åŒ–å§ã€‚

  > - 1.å°½é‡å‡å°‘ HTTP è¯·æ±‚ä¸ªæ•°
  > - 2.ä½¿ç”¨ CDNï¼ˆå†…å®¹åˆ†å‘ç½‘ç»œï¼‰
  > - 3.ä¸ºæ–‡ä»¶å¤´æŒ‡å®š Expires æˆ– Cache-Control ï¼Œä½¿å†…å®¹å…·æœ‰ç¼“å­˜æ€§ã€‚
  > - 4.é¿å…ç©ºçš„ src å’Œ href
  > - 5.ä½¿ç”¨ gzip å‹ç¼©å†…å®¹
  > - 6.æŠŠ CSS æ”¾åˆ°é¡¶éƒ¨
  > - 7.æŠŠ JS æ”¾åˆ°åº•éƒ¨
  > - 8.é¿å…ä½¿ç”¨ CSS è¡¨è¾¾å¼
  > - 9.å°† CSS å’Œ JS æ”¾åˆ°å¤–éƒ¨æ–‡ä»¶ä¸­
  > - 10.å‡å°‘ DNS æŸ¥æ‰¾æ¬¡æ•°
  > - 11.ç²¾ç®€ CSS å’Œ JS
  > - 12.å‡å°‘é¡µé¢é‡å®šå‘
  > - 13.å‰”é™¤é‡å¤çš„ JS å’Œ CSS
  > - 14.é…ç½® ETags
  > - 15.ä½¿ AJAX å¯ç¼“å­˜
  > - 16.å°½æ—©åˆ·æ–°è¾“å‡ºç¼“å†²
  > - 17.ä½¿ç”¨ GET æ¥å®Œæˆ AJAX è¯·æ±‚
  > - 18.å»¶è¿ŸåŠ è½½
  > - 19.é¢„åŠ è½½
  > - 20.å‡å°‘ DOM å…ƒç´ ä¸ªæ•°
  > - 21.æ ¹æ®åŸŸååˆ’åˆ†é¡µé¢å†…å®¹
  > - 22.å°½é‡å‡å°‘ iframe çš„ä¸ªæ•°
  > - 23.é¿å… 404
  > - 24.å‡å°‘ Cookie çš„å¤§å°
  > - 25.ä½¿ç”¨æ—  cookie çš„åŸŸ
  > - 26.å‡å°‘ DOM è®¿é—®
  > - 27.ç”¨ `<link>` ä»£æ›¿ `@import`
  > - 28.é¿å…ä½¿ç”¨æ»¤é•œ
  > - 29.ä¼˜åŒ–å›¾åƒ
  > - 30.ä¼˜åŒ– CSS Spirite
  > - 31.favicon.icoè¦å°è€Œä¸”å¯ç¼“å­˜
  > - 32.ä¿æŒå•ä¸ªå†…å®¹å°äº25Kã€
  > - ç­‰ç­‰

- 11 å…·ä½“è¯´è¯´`é¢„åŠ è½½`å’Œ`å»¶è¿ŸåŠ è½½`ã€‚

  > - **é¢„åŠ è½½**: é¢„åŠ è½½æ˜¯ä¸€ç§æµè§ˆå™¨æœºåˆ¶ï¼Œä½¿ç”¨æµè§ˆå™¨ç©ºé—²æ—¶é—´æ¥é¢„å…ˆä¸‹è½½/åŠ è½½ç”¨æˆ·æ¥ä¸‹æ¥å¾ˆå¯èƒ½ä¼šæµè§ˆçš„é¡µé¢/èµ„æºï¼Œå½“ç”¨æˆ·è®¿é—®æŸä¸ªé¢„åŠ è½½çš„é“¾æ¥æ—¶ï¼Œå¦‚æœä»ç¼“å­˜å‘½ä¸­,é¡µé¢å°±å¾—ä»¥å¿«é€Ÿå‘ˆç°
  > - **å»¶è¿ŸåŠ è½½**ï¼šé€šè¿‡å¯¹`script`æ ‡ç­¾è®¾ç½®`defer` æˆ– `async`å±æ€§å®ç°å¼‚æ­¥åŠ è½½ã€‚
  >
  > - async ä¸ defer çš„å¼‚åŒï¼š
  >   + ç›¸åŒç‚¹ï¼šå¼‚æ­¥åŠ è½½æ–‡ä»¶
  >   + ä¸åŒç‚¹ï¼š
  >     * asyncï¼šè™½ç„¶æ˜¯å¼‚æ­¥åŠ è½½ï¼Œä½†å½“æœ‰å¤šä¸ªè„šæœ¬å¼‚æ­¥åŠ è½½çš„æ—¶å€™ï¼Œä¸ä¸€å®šå…ˆåŠ è½½å“ªä¸€ä¸ªï¼ŒåŠ è½½é¡ºåºä¸ä¸€å®š
  >     * deferï¼šåŠ è½½é¡ºåºç”±ç¬¬ä¸€ä¸ªå»¶è¿Ÿè„šæœ¬åˆ°æœ€åä¸€ä¸ªå»¶è¿Ÿè„šæœ¬
  >     * Chromeä¸‹çš„çœŸå®æƒ…å†µè§[æµ…è°ˆscriptæ ‡ç­¾çš„deferå’Œasync](https://segmentfault.com/a/1190000006778717),
  >     ```
  >     æ‰€ä»¥ï¼Œé€šä¿—æ¥è®²ï¼Œchrome æµè§ˆå™¨é¦–å…ˆä¼šè¯·æ±‚HTMLæ–‡æ¡£ï¼Œç„¶åå¯¹å…¶ä¸­çš„å„ç§èµ„æºè°ƒç”¨ç›¸åº”çš„èµ„æºåŠ è½½å™¨è¿›è¡Œå¼‚æ­¥ç½‘ç»œè¯·æ±‚ï¼ŒåŒæ—¶è¿›è¡ŒDOMæ¸²æŸ“ï¼Œç›´åˆ°é‡åˆ° <script> æ ‡ç­¾çš„æ—¶å€™ï¼Œä¸»è¿›ç¨‹æ‰ä¼šåœæ­¢æ¸²æŸ“ç­‰å¾…æ­¤èµ„æºåŠ è½½å®Œæ¯•ç„¶åè°ƒç”¨V8å¼•æ“å¯¹jsè§£æï¼Œç»§è€Œç»§ç»­è¿›è¡Œ DOM è§£æã€‚
  >     æˆ‘çš„ç†è§£å¦‚æœåŠ äº†async å±æ€§å°±ç›¸å½“äºå•ç‹¬å¼€äº†ä¸€ä¸ªè¿›ç¨‹å»ç‹¬ç«‹åŠ è½½å’Œæ‰§è¡Œï¼Œè€Œ defer æ˜¯å’Œå°† <script> æ”¾åˆ° <body> åº•éƒ¨ä¸€æ ·çš„æ•ˆæœã€‚  
  >     ```
- 12.äº†è§£**é˜²æŠ–**å’Œ**èŠ‚æµ**å—ï¼Ÿ

  > åœ¨å‰ç«¯å¼€å‘çš„è¿‡ç¨‹ä¸­ï¼Œæˆ‘ä»¬ç»å¸¸ä¼šéœ€è¦ç»‘å®šä¸€äº›æŒç»­è§¦å‘çš„äº‹ä»¶ï¼Œå¦‚ resizeã€scrollã€mousemove ç­‰ç­‰ï¼Œä½†æœ‰äº›æ—¶å€™æˆ‘ä»¬å¹¶ä¸å¸Œæœ›åœ¨äº‹ä»¶æŒç»­è§¦å‘çš„è¿‡ç¨‹ä¸­é‚£ä¹ˆé¢‘ç¹åœ°å»æ‰§è¡Œå‡½æ•°ã€‚ é€šå¸¸è¿™ç§æƒ…å†µä¸‹é˜²æŠ–å’ŒèŠ‚æµæ˜¯æ¯”è¾ƒå¥½çš„è§£å†³æ–¹æ¡ˆã€‚
  >
  > - é˜²æŠ–ï¼ˆdebounceï¼‰: æ‰€è°“é˜²æŠ–ï¼Œå°±æ˜¯æŒ‡è§¦å‘äº‹ä»¶ååœ¨ n ç§’å†…å‡½æ•°åªèƒ½æ‰§è¡Œä¸€æ¬¡ï¼Œå¦‚æœåœ¨ n ç§’å†…åˆè§¦å‘äº†äº‹ä»¶ï¼Œåˆ™ä¼šé‡æ–°è®¡ç®—å‡½æ•°æ‰§è¡Œæ—¶é—´ã€‚
  ```js
    /**
    * @desc å‡½æ•°é˜²æŠ–
    * @param func å‡½æ•°
    * @param wait å»¶è¿Ÿæ‰§è¡Œæ¯«ç§’æ•°
    * @param immediate true è¡¨ç«‹å³æ‰§è¡Œï¼Œfalse è¡¨éç«‹å³æ‰§è¡Œ
    */
    function debounce(func, wait, immediate) {
      let timeout;
      return function () {
        let context = this;
        let args = arguments;
        if (timeout) clearTimeout(timeout);
        if (immediate) {
          var callNow = !timeout;
          timeout = setTimeout(() => {
            timeout = null;
          }, wait)
          if (callNow) func.apply(context, args)
        } else {
          timeout = setTimeout(function(){
            func.apply(context, args)
          }, wait);
        }
      }
    }
  ```
  > - èŠ‚æµï¼ˆthrottleï¼‰: æ‰€è°“èŠ‚æµï¼Œå°±æ˜¯æŒ‡è¿ç»­è§¦å‘äº‹ä»¶ä½†æ˜¯åœ¨ n ç§’ä¸­åªæ‰§è¡Œä¸€æ¬¡å‡½æ•°ã€‚èŠ‚æµä¼šç¨€é‡Šå‡½æ•°çš„æ‰§è¡Œé¢‘ç‡ã€‚
  ```js
    /**
    * @desc å‡½æ•°èŠ‚æµ
    * @param func å‡½æ•°
    * @param wait å»¶è¿Ÿæ‰§è¡Œæ¯«ç§’æ•°
    * @param type 1 è¡¨æ—¶é—´æˆ³ç‰ˆï¼Œ2 è¡¨å®šæ—¶å™¨ç‰ˆ
    */
    function throttle(func, wait ,type) {
      if (type === 1) {
        let previous = 0;
      } else if (type===2) {
        let timeout;
      }
      return function() {
        let context = this;
        let args = arguments;
        if (type === 1) {
          let now = Date.now();
          if (now - previous > wait) {
              func.apply(context, args);
              previous = now;
          }
        } else if (type === 2) {
          if (!timeout) {
            timeout = setTimeout(() => {
              timeout = null;
              func.apply(context, args)
            }, wait)
          }
        }
      }
    }
  ```
  > å‚è€ƒæ–‡ç« ï¼š[å‡½æ•°é˜²æŠ–å’ŒèŠ‚æµ](https://www.jianshu.com/p/c8b86b09daf0)


- 13.Dom çš„**é‡ç»˜**å’Œ**å›æµ**å‘¢ï¼Ÿ

  > - **é‡ç»˜ï¼ˆrepaintï¼‰**: ï¼ˆç›’å­æ¨¡å‹çš„å®½é«˜ã€ä½ç½®ã€æ ·å¼ç¡®å®šåï¼‰æµè§ˆå™¨æŠŠå…ƒç´ ç»˜åˆ¶å‡ºæ¥ç§°ä¸ºé‡ç»˜ã€‚å½“å‰å…ƒç´ çš„æ ·å¼(èƒŒæ™¯é¢œè‰²ã€å­—ä½“é¢œè‰²ç­‰)å‘ç”Ÿæ”¹å˜çš„æ—¶å€™ï¼Œæˆ‘ä»¬åªéœ€è¦æŠŠæ”¹å˜çš„å…ƒç´ é‡æ–°çš„æ¸²æŸ“ä¸€ä¸‹å³å¯ ,é‡ç»˜å¯¹æµè§ˆå™¨çš„æ€§èƒ½å½±å“è¾ƒå°ï¼Œæ‰€ä»¥ä¸€èˆ¬ä¸è€ƒè™‘ã€‚
  > - **å›æµï¼ˆreflowï¼‰**: å½“é¡µé¢ä¸Šçš„ç»“æ„å‘ç”Ÿæ”¹å˜ï¼Œæµè§ˆå™¨ä¼šä»æ–°çš„æ¸²æŸ“æˆ‘ä»¬çš„é¡µé¢ï¼Œå›æµæ˜¯æ¯”è¾ƒæ¶ˆè€—æ€§èƒ½çš„ã€‚
  >   + å›æµäº§ç”Ÿçš„æƒ…å†µ 
  >     * 1ã€æ·»åŠ æˆ–è€…åˆ é™¤å¯è§çš„DOMå…ƒç´ ï¼› 
  >     * 2ã€å…ƒç´ ä½ç½®æ”¹å˜ï¼› 
  >     * 3ã€å…ƒç´ å°ºå¯¸æ”¹å˜â€”â€”è¾¹è·ã€å¡«å……ã€è¾¹æ¡†ã€å®½åº¦å’Œé«˜åº¦ 
  >     * 4ã€å†…å®¹æ”¹å˜â€”â€”æ¯”å¦‚æ–‡æœ¬æ”¹å˜æˆ–è€…å›¾ç‰‡å¤§å°æ”¹å˜è€Œå¼•èµ·çš„è®¡ç®—å€¼å®½åº¦å’Œé«˜åº¦æ”¹å˜ï¼› 
  >     * 5ã€é¡µé¢æ¸²æŸ“åˆå§‹åŒ–ï¼› 
  >     * 6ã€æµè§ˆå™¨çª—å£å°ºå¯¸æ”¹å˜â€”â€”resizeäº‹ä»¶å‘ç”Ÿæ—¶ï¼›
  > ç”±äºå›æµ å¯¹æµè§ˆå™¨çš„å½±å“æ¯”è¾ƒå¤§ï¼Œæ‰€ä»¥æˆ‘ä»¬ä¸€èˆ¬æ˜¯ç”¨æ–‡æ¡£ç¢ç‰‡çš„æ–¹å¼å»è§£å†³è¿™ä¸ªé—®é¢˜çš„ï¼Œå½“æˆ‘ä»¬éœ€è¦ç»™DOMä¸­æ·»åŠ æ–°çš„å…ƒç´ çš„æ—¶å€™ï¼Œå…ˆå°†å…¶æ”¾åœ¨ä¸€ä¸ªå®¹å™¨ä¸­ï¼Œç„¶åç»Ÿä¸€æ·»åŠ ï¼Œè¿™æ ·å°±åªäº§ç”Ÿäº†ä¸€æ¬¡å›æµã€‚

  ```js
    var frg = document.createDocumentFragment();
      // åˆ›å»ºäº†ä¸€ä¸ªæ–‡æ¡£ç¢ç‰‡:ç›¸å½“äºä¸€ä¸ªå®¹å™¨ï¼Œ
      // æŠŠåŠ¨æ€åˆ›å»ºçš„liå…ˆæ”¾åˆ°å®¹å™¨ä¸­,æœ€åä¸€èµ·æ·»åŠ åˆ°é¡µé¢ä¸­(åªå¼•å‘ä¸€æ¬¡å›æµ)
     for (var i = 0; i < 10; i++) {
       var oLi = document.createElement("li");
       oLi.onmouseover = function () {
         this.style.backgroundColor = "#22b909";
       }
       oLi.onmouseout = function () {
           this.style.backgroundColor = "";
       }
       frg.appendChild(oLi);
     }
     oUl.appendChild(frg);
  ```

- 14.`Promise.all()` å’Œ `Promise.race()` çš„ä¼˜ç¼ºç‚¹æœ‰å“ªäº›ï¼Ÿ
  
  > - Promise.all()
  >   + å¸¸è§ä½¿ç”¨åœºæ™¯ ï¼š å¤šä¸ªå¼‚æ­¥ç»“æœåˆå¹¶åˆ°ä¸€èµ·, Promise.allå¯ä»¥å°†å¤šä¸ªPromiseå®ä¾‹åŒ…è£…æˆä¸€ä¸ªæ–°çš„Promiseå®ä¾‹ã€‚ç”¨äºå°†å¤šä¸ªPromiseå®ä¾‹ï¼ŒåŒ…è£…æˆä¸€ä¸ªæ–°çš„Promiseå®ä¾‹ã€‚
  >   + å®ƒæ¥å—ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡ï¼Œå¦‚ Array æˆ– Stringã€‚
  >   + å¦‚æœä¼ å…¥çš„å‚æ•°æ˜¯ä¸€ä¸ªç©ºçš„å¯è¿­ä»£å¯¹è±¡ï¼Œåˆ™è¿”å›ä¸€ä¸ªå·²å®Œæˆï¼ˆalready resolvedï¼‰çŠ¶æ€çš„ Promiseã€‚
  >   + å¦‚æœä¼ å…¥çš„å‚æ•°ä¸åŒ…å«ä»»ä½• promiseï¼Œåˆ™è¿”å›ä¸€ä¸ªå¼‚æ­¥å®Œæˆï¼ˆasynchronously resolvedï¼‰ Promiseã€‚æ³¨æ„ï¼šGoogle Chrome 58 åœ¨è¿™ç§æƒ…å†µä¸‹è¿”å›ä¸€ä¸ªå·²å®Œæˆï¼ˆalready resolvedï¼‰çŠ¶æ€çš„ Promiseã€‚
  >   + å…¶å®ƒæƒ…å†µä¸‹è¿”å›ä¸€ä¸ªå¤„ç†ä¸­ï¼ˆpendingï¼‰çš„Promiseã€‚è¿™ä¸ªè¿”å›çš„ promise ä¹‹åä¼šåœ¨æ‰€æœ‰çš„ promise éƒ½å®Œæˆæˆ–æœ‰ä¸€ä¸ª promise å¤±è´¥æ—¶å¼‚æ­¥åœ°å˜ä¸ºå®Œæˆæˆ–å¤±è´¥ã€‚
  >   + è¿”å›å€¼å°†ä¼šæŒ‰ç…§å‚æ•°å†…çš„ promise é¡ºåºæ’åˆ—ï¼Œè€Œä¸æ˜¯ç”±è°ƒç”¨ promise çš„å®Œæˆé¡ºåºå†³å®šã€‚
  >   + æ­¤æ–¹æ³•åœ¨é›†åˆå¤šä¸ª promise çš„è¿”å›ç»“æœæ—¶å¾ˆæœ‰ç”¨ã€‚
  >   + ä¼ å…¥çš„æ•°ç»„å¯ä»¥æ˜¯Promiseå¯¹è±¡ï¼Œä¹Ÿå¯ä»¥æ˜¯å…¶å®ƒå€¼ï¼Œåªæœ‰Promiseä¼šç­‰å¾…çŠ¶æ€æ”¹å˜ã€‚
  >   + å½“æ‰€æœ‰çš„å­Promiseéƒ½å®Œæˆï¼Œè¯¥Promiseå®Œæˆï¼Œè¿”å›å€¼æ˜¯å…¨éƒ¨å€¼çš„æ•°ç»„ã€‚
  >   + å¦‚æœæœ‰ä»»ä½•ä¸€ä¸ªå¤±è´¥ï¼Œè¯¥Promiseå¤±è´¥ï¼Œè¿”å›å€¼æ˜¯ç¬¬ä¸€ä¸ªå¤±è´¥çš„å­Promiseçš„ç»“æœã€‚
  >   + åœ¨ä»»ä½•æƒ…å†µä¸‹ï¼ŒPromise.all è¿”å›çš„ promise çš„å®ŒæˆçŠ¶æ€çš„ç»“æœéƒ½æ˜¯ä¸€ä¸ªæ•°ç»„ï¼Œå®ƒåŒ…å«æ‰€æœ‰çš„ä¼ å…¥è¿­ä»£å‚æ•°å¯¹è±¡çš„å€¼ï¼ˆä¹ŸåŒ…æ‹¬é promise å€¼ï¼‰ã€‚
  >   + å¦‚æœä¼ å…¥çš„ promise ä¸­æœ‰ä¸€ä¸ªå¤±è´¥ï¼ˆrejectedï¼‰ï¼ŒPromise.all å¼‚æ­¥åœ°å°†å¤±è´¥çš„é‚£ä¸ªç»“æœç»™å¤±è´¥çŠ¶æ€çš„å›è°ƒå‡½æ•°ï¼Œè€Œä¸ç®¡å…¶å®ƒ promise æ˜¯å¦å®Œæˆã€‚
  >
  > - `Promise.race()`
  >   + å¸¸è§ä½¿ç”¨åœºæ™¯ï¼šæŠŠå¼‚æ­¥æ“ä½œå’Œå®šæ—¶å™¨æ”¾åˆ°ä¸€èµ·ï¼Œå¦‚æœå®šæ—¶å™¨å…ˆè§¦å‘ï¼Œè®¤ä¸ºè¶…æ—¶ï¼Œå‘ŠçŸ¥ç”¨æˆ·
  >   + å®ƒæ¥å—ä¸€ä¸ªå¯è¿­ä»£å¯¹è±¡ï¼Œç±»ä¼¼Arrayã€‚
  >   + è¿”å›ä¸€ä¸ªå¾…å®šçš„ Promise åªè¦ç»™å®šçš„è¿­ä»£ä¸­çš„ä¸€ä¸ªpromiseè§£å†³æˆ–æ‹’ç»ï¼Œå°±é‡‡ç”¨ç¬¬ä¸€ä¸ªpromiseçš„å€¼ä½œä¸ºå®ƒçš„å€¼ï¼Œä»è€Œå¼‚æ­¥åœ°è§£ææˆ–æ‹’ç»ï¼ˆä¸€æ—¦å †æ ˆä¸ºç©ºï¼‰ã€‚
  >   + race å‡½æ•°è¿”å›ä¸€ä¸ª Promiseï¼Œå®ƒå°†ä¸ç¬¬ä¸€ä¸ªä¼ é€’çš„ promise ç›¸åŒçš„å®Œæˆæ–¹å¼è¢«å®Œæˆã€‚å®ƒå¯ä»¥æ˜¯å®Œæˆï¼ˆ resolvesï¼‰ï¼Œä¹Ÿå¯ä»¥æ˜¯å¤±è´¥ï¼ˆrejectsï¼‰ï¼Œè¿™è¦å–å†³äºç¬¬ä¸€ä¸ªå®Œæˆçš„æ–¹å¼æ˜¯ä¸¤ä¸ªä¸­çš„å“ªä¸ªã€‚
  >   + å¦‚æœä¼ çš„è¿­ä»£æ˜¯ç©ºçš„ï¼Œåˆ™è¿”å›çš„ promise å°†æ°¸è¿œç­‰å¾…ã€‚
  >   + å¦‚æœè¿­ä»£åŒ…å«ä¸€ä¸ªæˆ–å¤šä¸ªéæ‰¿è¯ºå€¼å’Œ/æˆ–å·²è§£å†³/æ‹’ç»çš„æ‰¿è¯ºï¼Œåˆ™ Promise.race å°†è§£æä¸ºè¿­ä»£ä¸­æ‰¾åˆ°çš„ç¬¬ä¸€ä¸ªå€¼ã€‚
  >   + ç±»ä¼¼äºPromise.all(), åŒºåˆ«åœ¨äº**å®ƒæœ‰ä»»æ„ä¸€ä¸ªè¿”å›æˆåŠŸåï¼Œå°±ç®—å®Œæˆï¼Œä½†æ˜¯è¿›ç¨‹ä¸ä¼šç«‹å³åœæ­¢**

- 15.`async/await` ä¸ `Promise` çš„ä¼˜ç¼ºç‚¹æœ‰å“ªäº›ï¼Ÿ

  > async/await æ˜¯å†™å¼‚æ­¥ä»£ç çš„ä¸€ç§æ–¹å¼ï¼Œä»¥å‰çš„æ–¹æ³•æœ‰å›è°ƒå‡½æ•°å’ŒPromiseã€‚
  > async/await æ˜¯åŸºäº Promise å®ç°çš„ï¼Œå®ƒä¸èƒ½ç”¨äºæ™®é€šçš„å›è°ƒå‡½æ•°ã€‚
  > async/await ä¸ Promise ä¸€æ ·ï¼Œæ˜¯éé˜»å¡çš„ã€‚
  > async/await ä½¿å¾—å¼‚æ­¥ä»£ç çœ‹èµ·æ¥åƒåŒæ­¥ä»£ç ã€‚
  > await å…³é”®å­—åªèƒ½ç”¨åœ¨ async å®šä¹‰çš„å‡½æ•°å†…ã€‚
  > async å‡½æ•°ä¼šéšå¼åœ°è¿”å›ä¸€ä¸ª Promiseï¼Œè¯¥ Promise çš„ resolve å€¼å°±æ˜¯å‡½æ•° returnçš„å€¼ã€‚
  > - async/await ç›¸å¯¹äº Promise çš„ä¼˜ç‚¹
  >   + 1.ç®€æ´: ä¸éœ€è¦å†™.thenï¼Œä¸éœ€è¦å†™åŒ¿åå‡½æ•°å¤„ç†Promiseçš„resolveå€¼ï¼Œä¹Ÿä¸éœ€è¦å®šä¹‰å¤šä½™çš„dataå˜é‡ï¼Œè¿˜é¿å…äº†åµŒå¥—ä»£ç ã€‚
  >   + 2.é”™è¯¯å¤„ç†: Promiseä¸­ï¼Œ try/catch ä¸èƒ½å¤„ç† Promise ä¸­çš„é”™è¯¯ï¼Œéœ€è¦ä½¿ç”¨ .catchï¼Œä½¿ç”¨ aync/await çš„è¯ï¼Œtry/catchèƒ½å¤„ç†Promise ä¸­çš„é”™è¯¯:
  >   + 3.å¯è¯»æ€§ï¼šasync/await ç¼–å†™å¯ä»¥å¤§å¤§åœ°æé«˜å¯è¯»æ€§ã€‚
  >   + 4.é”™è¯¯æ ˆ: Promise é“¾ä¸­è¿”å›çš„é”™è¯¯æ ˆä¸ä¼šå‡†ç¡®çš„ç»™å‡ºé”™è¯¯å‘ç”Ÿä½ç½®çš„çº¿ç´¢, async/await ä¸­çš„é”™è¯¯æ ˆä¼šæŒ‡å‘é”™è¯¯æ‰€åœ¨çš„å‡½æ•°ã€‚

- 16.Vue çš„å­ç»„ä»¶ä¸­å¯ä»¥ä¿®æ”¹ props çš„å€¼å—ï¼Ÿå¦‚æœä¿®æ”¹äº†ä¼šæŠ¥é”™å—ï¼Ÿ
  > å…ˆä¸Šå¼ å›¾ï¼Œçœ‹çœ‹ Vue.js ä½œè€…çš„çœ‹æ³•

  <div style="width:100%;display:flex;flex-direction:column;justify-content:center;text-align:center;">

    <img src="https://pub.wangxuefeng.com.cn/asset/blogthumbnail/baiduInterview/modifyProps.png" style="width:100%;max-width:600px;margin: 5px auto;">

  </div>

  > æ˜¾ç„¶ï¼Œä½œè€…éƒ½ä¸å¸Œæœ›åœ¨å­ç»„ä»¶ä¸­å»ä¿®æ”¹çˆ¶ç»„ä»¶ä¸­çš„æ•°æ®ã€‚
  >
  > Vue.js å®˜ç½‘çš„æè¿°å¦‚ä¸‹ï¼š
  >
  > æ‰€æœ‰çš„ prop éƒ½ä½¿å¾—å…¶çˆ¶å­ prop ä¹‹é—´å½¢æˆäº†ä¸€ä¸ªå•å‘ä¸‹è¡Œç»‘å®šï¼šçˆ¶çº§ prop çš„æ›´æ–°ä¼šå‘ä¸‹æµåŠ¨åˆ°å­ç»„ä»¶ä¸­ï¼Œä½†æ˜¯åè¿‡æ¥åˆ™ä¸è¡Œã€‚è¿™æ ·ä¼šé˜²æ­¢ä»å­ç»„ä»¶æ„å¤–æ”¹å˜çˆ¶çº§ç»„ä»¶çš„çŠ¶æ€ï¼Œä»è€Œå¯¼è‡´ä½ çš„åº”ç”¨çš„æ•°æ®æµå‘éš¾ä»¥ç†è§£ã€‚
  > è¿™é‡Œæœ‰ä¸¤ç§å¸¸è§çš„è¯•å›¾æ”¹å˜ä¸€ä¸ª prop çš„æƒ…å½¢ï¼š
  >
  > è¿™ä¸ª prop ç”¨æ¥ä¼ é€’ä¸€ä¸ªåˆå§‹å€¼ï¼›è¿™ä¸ªå­ç»„ä»¶æ¥ä¸‹æ¥å¸Œæœ›å°†å…¶ä½œä¸ºä¸€ä¸ªæœ¬åœ°çš„ prop æ•°æ®æ¥ä½¿ç”¨ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæœ€å¥½å®šä¹‰ä¸€ä¸ªæœ¬åœ°çš„ data å±æ€§å¹¶å°†è¿™ä¸ª prop ç”¨ä½œå…¶åˆå§‹å€¼ï¼š
  ```js
    props: ['initialCounter'],
    data: function () {
      return {
        counter: this.initialCounter
      }
    }
  ```
  > è¿™ä¸ª prop ä»¥ä¸€ç§åŸå§‹çš„å€¼ä¼ å…¥ä¸”éœ€è¦è¿›è¡Œè½¬æ¢ã€‚åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæœ€å¥½ä½¿ç”¨è¿™ä¸ª prop çš„å€¼æ¥å®šä¹‰ä¸€ä¸ªè®¡ç®—å±æ€§ï¼š
  ```js
    props: ['size'],
    computed: {
      normalizedSize: function () {
        return this.size.trim().toLowerCase()
      }
    }
  ```
  > æ³¨æ„åœ¨ JavaScript ä¸­å¯¹è±¡å’Œæ•°ç»„æ˜¯é€šè¿‡å¼•ç”¨ä¼ å…¥çš„ï¼Œæ‰€ä»¥å¯¹äºä¸€ä¸ªæ•°ç»„æˆ–å¯¹è±¡ç±»å‹çš„ prop æ¥è¯´ï¼Œåœ¨å­ç»„ä»¶ä¸­æ”¹å˜è¿™ä¸ªå¯¹è±¡æˆ–æ•°ç»„æœ¬èº«å°†ä¼šå½±å“åˆ°çˆ¶ç»„ä»¶çš„çŠ¶æ€ã€‚
  > é¢å¤–çš„ï¼Œæ¯æ¬¡çˆ¶çº§ç»„ä»¶å‘ç”Ÿæ›´æ–°æ—¶ï¼Œå­ç»„ä»¶ä¸­æ‰€æœ‰çš„ prop éƒ½å°†ä¼šåˆ·æ–°ä¸ºæœ€æ–°çš„å€¼ã€‚è¿™æ„å‘³ç€ä½ ä¸åº”è¯¥åœ¨ä¸€ä¸ªå­ç»„ä»¶å†…éƒ¨æ”¹å˜ propã€‚å¦‚æœä½ è¿™æ ·åšäº†ï¼ŒVue ä¼šåœ¨æµè§ˆå™¨çš„æ§åˆ¶å°ä¸­å‘å‡ºè­¦å‘Šã€‚
  > è‡³äºæ˜¯å¦æŠ¥é”™
  >   - å¦‚æœåœ¨å­ç»„ä»¶åªæ˜¯ä¿®æ”¹ prop çš„`å€¼`çš„è¯
  >     + åªæœ‰ prop ä¸ºéå¼•ç”¨ç±»å‹æ•°æ®ï¼Œè­¬å¦‚å­—ç¬¦ä¸²ï¼Œæ•°å­—ç­‰ï¼Œæ‰ä¼šæŠ¥é”™ã€‚
  >     + è€Œå¯¹äºå¼•ç”¨ç±»å‹çš„æ•°æ®ï¼Œå¦‚å¯¹è±¡ï¼Œæ•°ç»„ç­‰ï¼Œä¸ä¼šæŠ¥é”™ã€‚ä¸ªäººè®¤ä¸ºå…¶åŸå› å¯èƒ½æ˜¯åªæ˜¯ä¿®æ”¹äº†å…¶å†…éƒ¨çš„å€¼ï¼Œå…¶æŒ‡é’ˆçš„æŒ‡å‘æ€§å¹¶æ²¡æœ‰å‘ç”Ÿæ”¹å˜ã€‚
  >   - å¦‚æœåœ¨å­ç»„ä»¶ä¿®æ”¹ prop æ•°ç»„ã€å¯¹è±¡çš„æŒ‡é’ˆæŒ‡å‘
  >     + ä¼šæŠ¥é”™
  >
  > <code style="color:red;">
  >   [Vue warn]: Avoid mutating a prop directly since the value will be overwritten whenever the parent component re-renders. Instead, use a data or computed property based on the prop's value.
  > </code>

- 17.æ‰‹å†™ä¸€ä¸‹æ·±æ‹·è´çš„ä»£ç å§ã€‚

  > MDN ä¸Šçš„`å–å·§`å†™æ³•
  ```js
    const deepClone = (obj) => JSON.parse(JSON.stringify(obj));
  ```
  > è¿™ç§å†™æ³•å¦‚æœå‡ºç°å¾ªç¯å¼•ç”¨çš„è¯ï¼Œ`JSON.stringify(obj)` ä¼šæŠ›å‡ºå¼‚å¸¸ï¼Œè€Œä¸”ä¸èƒ½å¤Ÿè¯†åˆ«Functionï¼Œå› æ­¤è¿™ç§å†™æ³•é€‚ç”¨äºä¸€äº›æ¯”è¾ƒç®€å•æ— å¾ªç¯å¼•ç”¨ã€æ— Functionçš„å¯¹è±¡æ·±æ‹·è´
  >
  > ç»è¿‡ç¢ç£¨ï¼Œè‡ªå·±å†™äº†ä¸€ä¸ªæ·±æ‹·è´çš„ç±»ï¼Œæ„Ÿè§‰è¦è§£å†³å¾ªç¯å¼•ç”¨é—®é¢˜ï¼Œåªç”¨ä¸€ä¸ªæ–¹æ³•è¿˜æ˜¯æœ‰ç‚¹å›°éš¾çš„ï¼Œæ‰€ä»¥é€šè¿‡ç±»é‡Œçš„å¤šä¸ªæ–¹æ³•å’Œå±æ€§ååŒè§£å†³ã€‚ä»£ç å¦‚ä¸‹ï¼š

  ```js
  // åŸåˆ›ä»£ç ï¼Œåªæ­¤ä¸€å®¶ï¼Œå¦‚æœ‰é›·åŒï¼Œçº¯å±å·§åˆ

    class DeepClone {
      constructor(obj) {
        this.src = obj || {};
        // è¦æ‹·è´çš„å¯¹è±¡
        this.hasClonedObj = [];
        // ç¼“å­˜ å·²ç»æ‹·è´è¿‡çš„ object
        this._Circular_reference_tag = '$ref';
        // å¾ªç¯å¼•ç”¨å ä½ç¬¦
      }
      reset() {
        // æ¸…ç©ºå·²ç»æ‹·è´è¿‡çš„ object
        this.hasClonedObj = [];
        return this;
      }
      finishedCloneObj(obj) {
        // æš‚å­˜å·²ç»æ‹·è´è¿‡çš„ objectï¼Œ ç”¨äºåˆ¤æ–­æ˜¯å¦å¾ªç¯å¼•ç”¨
        if (this.hasClonedObj.every(e => e !== obj)) {
          this.hasClonedObj.push(obj);
        }
      }
      hasObjClone(obj) {
        // åˆ¤æ–­ obj æ˜¯å¦å·²ç»æ‹·è´è¿‡ï¼Œå³åˆ¤æ–­æ˜¯å¦æœ‰å¾ªç¯å¼•ç”¨
        let rs = { hasClone: false, index: null };
        this.hasClonedObj.forEach((e, i) => {
          if (obj === e) {
            rs = { hasClone: true, index: i };
          }
        });
        return rs;
      }
      deepClone(src) {
        this.reset();
        // æ¸…ç©ºç¼“å­˜    
        return this.deepCloneCore(src || this.src);
        // æ·±åº¦æ‹·è´
      }
      cloneAndParseCR(src){
        this.reset();
        // æ¸…ç©ºç¼“å­˜    
        return this.parseCircularReference(this.deepCloneCore(src || this.src));
        // â€œæ·±â€åº¦æ‹·è´ è¿˜åŸå¾ªç¯å¼•ç”¨
      }
      parseCircularReference(rsObj) {
        // è§£æå¾ªç¯å¼•ç”¨ï¼Œè¿˜åŸå ä½ç¬¦
        if (typeof rsObj === 'object') {
          if (Array.isArray(rsObj)) {
            rsObj.forEach(e => this.parseCircularReference(e))
            // é€’å½’æ·±è§£æå¾ªç¯å¼•ç”¨
          } else {
            if (rsObj === null) return null;
            // å¦‚æœæ—¶ nullï¼Œç›´æ¥è¿”å› null
            Object.keys(rsObj).forEach(key => {
              if (rsObj.hasOwnProperty(key)) {
                rsObj[key] = this.parseCircularReference(rsObj[key])
              }
            })
          }
        } else if (typeof rsObj === 'string') {
          if (rsObj.includes(this._Circular_reference_tag)){
            let crObj = this.hasClonedObj[Number(rsObj.match(/[0-9]+/)[0])];
            rsObj = Array.isArray(crObj) ? [...crObj] : {...crObj};
            // è¿˜åŸå ä½ç¬¦ï¼Œ æ­¤å¤„ä¸ºæ·±åº¦ä¸ºä¸€çš„"æ·±"æ‹·è´ï¼Œæœ¬è´¨ä¸ºæµ…æ‹·è´
          }
        }
        return rsObj;
      }
      deepCloneCore(src) {
        let target;
        if (typeof src === 'object') {
          let { hasClone, index } = this.hasObjClone(src);
          if (hasClone) {
            // å¦‚æœå¾ªç¯å¼•ç”¨
            return `${this._Circular_reference_tag}_${index}`
            // è¿”å›å ä½ç¬¦ä¸ä¸‹æ ‡ç»„æˆçš„å­—ç¬¦ä¸²
          } else if (src) {
            this.finishedCloneObj(src);
            // ç¼“å­˜å·²ç»æ‹·è´è¿‡çš„å¯¹è±¡
          }
          if (Array.isArray(src)) {
            target = [];
            src.forEach((e, i) => target[i] = this.deepCloneCore(e))
            // é€’å½’æ·±åº¦æ‹·è´æ•°ç»„
          } else {
            if (src === null) return null;
            // å¦‚æœæ—¶ nullï¼Œç›´æ¥è¿”å› null
            target = {};
            Object.keys(src).forEach(key => {
              if (src.hasOwnProperty(key)) {
                target[key] = this.deepCloneCore(src[key])
              }
            })
            // å¾ªç¯é€’å½’æ·±åº¦æ‹·è´å¯¹è±¡
          } 
        } else {        
          target = src
          // é object ç±»å‹ç›´æ¥èµ‹å€¼æ‹·è´
        }
        return target
        // è¿”å›æ‹·è´ç»“æœ
      }
    }
  ```
  > å…¶å® 17é¢˜ æ˜¯ç”± 16é¢˜ è€Œæ¥çš„ï¼Œé¢è¯•å®˜æé—®çš„é¡ºåºæå…¶æœ‰é€»è¾‘ï¼Œå¦‚æœä½ è¿˜ä¸å¤ªæ¸…æ¥š 16é¢˜ å’Œ 17é¢˜ æœ‰å•¥å…³ç³»ï¼Œé‚£ä¹ˆå¯ä»¥`åº·åº·`è¿™ç¯‡æ–‡ç« [åœ¨vueä¸­å­ç»„ä»¶ä¿®æ”¹propså¼•å‘çš„å¯¹jsæ·±æ‹·è´å’Œæµ…æ‹·è´çš„æ€è€ƒ](https://www.cnblogs.com/hutuzhu/p/10119698.html);

æ„Ÿè°¢ä½ èƒ½çœ‹åˆ°è¿™é‡Œï¼æœ¬äººèƒ½åŠ›æœ‰é™ï¼Œæœ¬æ–‡ä¸­å¯èƒ½æœ‰äº›çº°æ¼æˆ–è€…ä¸æ­£ç¡®ä¹‹å¤„ï¼Œè¿˜è¯·æ‰¹è¯„æŒ‡æ­£ã€‚
<br>
ä»¥ä¸Šï¼